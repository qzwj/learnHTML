<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>jQuery的表单</title>
    <link rel="stylesheet" href="../common/css/base.css">
    <script src="./lib/jquery-3.2.1.js"></script>
    <style>
        .focus {
            border: 1px #f00 solid;
            background-color: #fcc;
        }
        .add {
            background-color: orange;
        }
    </style>
</head>
<body>
    <h1>表单标签</h1>
    <p>表单一共有三个部分组成 <br>
        表单标签 : 包含提交到服务器的方法 <br>
        表单域: 文本框, 密码框... <br>
        表单按钮: 提交按钮, 复位按钮, 一般按钮 <br>
    </p>

    <h2>表单实例</h2>
    <form action="#">
        <fieldset>
            <legend>个人基本信息</legend>
            <div>
                <label for="username">姓名</label>
                <input type="text" id="username">
            </div>

            <div>
                <label for="password">密码</label>
                <input type="password" id="password">
            </div>
            <div>
                <label for="details">详细信息</label>
                <textarea style="height: 100px; border: 1px black solid" id="details"></textarea>
            </div>
        </fieldset>
    </form>

    <script>
        $(":input").focus(function () {
            $(this).addClass("focus");
        }).blur(function () {
            $(this).removeClass("focus");
        });
    </script>

    <p><textarea disabled="disabled" style="height: 200px">
        上面的效果具体实现看源码
        fieldset标签可以理解为就是form的边框, legend是标题
        label标签的for绑定 input的id属性可以实现点击label的文字, 获取input的焦点
        js代码里就是给获取所有的input标签给获取焦点的时候添加一个样式, 失去焦点的时候在移除这个样式
        注意: $(":input") 和 $("input")不一样, 前者是选取所有的表单元素, 包括input, button, textarea等, 而后者只是选择所有的input
    </textarea>
    </p>

    <h2>多行文本框应用</h2>
    <div>
        <span id="bigger" class="add">增大</span>
        <span id="smaller" class="add">减小</span>
    </div>
    <div>
        <textarea  id="comment" style="height: 300px; border: 1px black solid; width: 500px;">
            textarea 里的滑动高度和height同理, 做法也一样, 具体做法右击见源码
        </textarea>
    </div>

    <script>
        $("#bigger").click(function () {
            var comment = $("#comment");
            if (!comment.is(":animated"))
            {
                if (comment.height() < 500){
                    comment.animate({ height : "+=50"}, 1000);
                }
            }
        });

        $("#smaller").click(function () {
            var comment = $("#comment");
            if (!comment.is(":animated"))
            {
                if (comment.height() > 50){
                    comment.animate({ height : comment.height()-50}, 1000);
                }
            }
        });
    </script>

    <h2>复选框应用</h2>
    你的爱好是:
    <input type="checkbox" id="checkOr"> 全选/全不选 <br>
    看书:<input type="checkbox" name="hobby" value="看书">
    游戏:<input type="checkbox" name="hobby" value="游戏">
    跑步:<input type="checkbox" name="hobby" value="跑步">
    运动:<input type="checkbox" name="hobby" value="运动"> <br>
    <button id="checkAll">全选</button>
    <button id="checkNo">全不选</button>
    <button id="checkReverse">反选</button>
    <button id="sumbit">提交</button>
    <p>
        实现上面的效果, 有多种做法, jQuery和原生的js混用效果更好 <br>
        $("input[name=hobby]:checkbox:checked").each(function(){}); 像这个, 选择器可以接连套用, 理解 <br>
        attr()和prop(), prop更好. <br>
        $("input[name=hobby]:checkbox").filter(":checked"); //filter(selector) 将匹配元素集合筛减为指定选择器的元素 <br>
        $("input[name=hobby]:checkbox").each(function(){}) // each遍历集合元素节点 <br>
        //以上的:checkedbox都可以省略, 具体实现看源码
    </p>
    <script>
        $("#checkAll").click(function () {
            $("input[name=hobby]:checkbox").prop("checked", true);
        });
        $("#checkNo").click(function () {
            $("input[name=hobby]:checkbox").prop("checked", false);
        });
        $("#checkReverse").click(function () {
            $("input[name=hobby]:checkbox").each(function () {
//               $(this).prop("checked", !$(this).prop("checked"));
                this.checked = !this.checked;
            });
        });
        $("#sumbit").click(function () {
            var test = "你提交的数据是:";
//            $("input[name=hobby]:checkbox").each(function () {
//                if (this.checked){
////                    test += this.value+"\r\n";
//                    test += $(this).val() + "\n";
//                }
//            });
            $("input[name=hobby]:checked").each(function () {
                test += $(this).val() + "\n";
            });
            alert(test);
        });
        
        $("#checkOr").click(function () {
            $("input[name=hobby]:checkbox").prop("checked", this.checked);
        });
        
        $("input[name=hobby]:checkbox").click(function () {
//            var flag = true;
//            $("input[name=hobby]:checkbox").each(function () {
//                if (!this.checked){
//                    flag = false;
//                }
//            });
//            $("#checkOr").prop("checked", flag);



            var temp = $("input[name=hobby]:checkbox");
            $("#checkOr").prop("checked", temp.length == temp.filter(":checked").length)
        });
    </script>
</body>
</html>